<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.1.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"leetao50.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.11.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="记录信息来源网络，内容只为方便查找，非公开信息，非请勿入">
<meta property="og:type" content="website">
<meta property="og:title" content="InfoPool">
<meta property="og:url" content="https://leetao50.github.io/index.html">
<meta property="og:site_name" content="InfoPool">
<meta property="og:description" content="记录信息来源网络，内容只为方便查找，非公开信息，非请勿入">
<meta property="og:locale" content="zh_CN">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://leetao50.github.io/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>InfoPool</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">InfoPool</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">私人信息记录</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name"></p>
  <div class="site-description" itemprop="description">记录信息来源网络，内容只为方便查找，非公开信息，非请勿入</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">52</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetao50.github.io/2024/01/11/angular/Angular%E4%B8%AD%E5%B8%B8%E7%94%A8Ref%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="InfoPool">
      <meta itemprop="description" content="记录信息来源网络，内容只为方便查找，非公开信息，非请勿入">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | InfoPool">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/01/11/angular/Angular%E4%B8%AD%E5%B8%B8%E7%94%A8Ref%E6%80%BB%E7%BB%93/" class="post-title-link" itemprop="url">Angular中常用Ref总结</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-01-11 15:47:53" itemprop="dateCreated datePublished" datetime="2024-01-11T15:47:53+08:00">2024-01-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2024-01-22 10:09:10" itemprop="dateModified" datetime="2024-01-22T10:09:10+08:00">2024-01-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="ApplicationRef"><a href="#ApplicationRef" class="headerlink" title="ApplicationRef"></a>ApplicationRef</h1><p>两个主要个作用：</p>
<p>（1）可以通过appRef.tick()来全局性调用变化检测；</p>
<p>   ApplicationRef.tick() - 检查所有组件树</p>
<p>（2）可以将视图用attachView()包含到变化检测中 用detachView()将视图移除变化检测 ；</p>
<p>  不用ViewContainerRef，动态插入一个组件到一个特定的DOM节点：</p>
<h1 id="ComponentRef"><a href="#ComponentRef" class="headerlink" title="ComponentRef"></a>ComponentRef</h1><p>表示组件的实例。</p>
<p>ComponentRef提供对组件实例的访问以及与此组件实例相关的其他对象，并允许您通过destroy方法销毁组件实例。</p>
<p>抽象类定义如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">abstract <span class="keyword">class</span> <span class="title class_">ComponentRef</span>&lt;C&gt; &#123;</span><br><span class="line">  abstract <span class="attr">location</span>: <span class="title class_">ElementRef</span> <span class="comment">// 组件实例的宿主元素所在的位置</span></span><br><span class="line">  abstract <span class="attr">injector</span>: <span class="title class_">Injector</span> <span class="comment">// 组件实例存在的注射器</span></span><br><span class="line">  abstract <span class="attr">instance</span>: C <span class="comment">// 组件实例</span></span><br><span class="line">  abstract <span class="attr">hostView</span>: <span class="title class_">ViewRef</span> <span class="comment">// 组件实例的宿主视图ViewRef</span></span><br><span class="line">  abstract <span class="attr">changeDetectorRef</span>: <span class="title class_">ChangeDetectorRef</span> <span class="comment">// 组件的ChangeDetectorRef</span></span><br><span class="line">  abstract <span class="attr">componentType</span>: <span class="title class_">Type</span>&lt;any&gt; <span class="comment">// 组件类型</span></span><br><span class="line">  abstract <span class="title function_">destroy</span>(): <span class="keyword">void</span> <span class="comment">// 销毁组件实例及其附加数据</span></span><br><span class="line">  abstract <span class="title function_">onDestroy</span>(<span class="attr">callback</span>: <span class="title class_">Function</span>): <span class="keyword">void</span> <span class="comment">// 允许注册将在组件销毁时调用的回调。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="injector-Injector"><a href="#injector-Injector" class="headerlink" title="injector: Injector"></a>injector: Injector</h2><p>我们在使用一个命令式引导一个Component之前需要在NgModule中的declarations部分声明这个Component，在使用这个Component时，通过依赖注入为Component提供的Service实际上是在NgModule声明，并且由NgModule提供的——NgModule就是Injector。</p>
<p>所以这个Injector一般就是你在使用这个Component时所在的NgModule。 </p>
<p>总结一句话，就是在动态加载Component时，你需要在哪个宿主（Component Host）下工作，那就获取哪个宿主的Injector，让宿主的Injector为你提供服务（provide service）。</p>
<h2 id="location-ElementRef"><a href="#location-ElementRef" class="headerlink" title="location: ElementRef"></a>location: ElementRef</h2><p>这个命名很容易让人困惑。实际上它是需要被动态加载的组件（Component）的视图（View）部分。它的其中一个属性叫做rootNodes，就是一个Native Element。</p>
<h2 id="hostView-ViewRef"><a href="#hostView-ViewRef" class="headerlink" title="hostView: ViewRef"></a>hostView: ViewRef</h2><p>上面已经存在一个ElementRef是为了提供视图的，而这个ViewRef看起来更像是视图的引用。没错，这很容易混淆。实际上ViewRef是用来提供数据检测和视图更新的。我们来看一下ViewRef的定义。</p>
<p>这三个部分就是一个Component最重要的组成部分：injector提供服务，location管理原生视图，hostView负责数据-视图更新。</p>
<h1 id="TemplateRef"><a href="#TemplateRef" class="headerlink" title="TemplateRef"></a>TemplateRef</h1><p>在介绍 TemplateRef 前，我们先来了解一下 HTML 模板元素template。模板元素是一种机制，允许包含加载页面时不渲染，但又可以随后通过 JavaScript 进行实例化的客户端内容。我们可以将模板视作为存储在页面上稍后使用的一小段内容。</p>
<p>用于表示内嵌的template模板元素，通过TemplateRef实例，我们可以方便的创建内嵌视图（Embedded Views），且可以轻松地访问到通过 ElementRef 封装后的 nativeElement。需要注意的是组件视图中的 template 模板元素，经过渲染后会被替换成 comment 元素。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">abstract <span class="keyword">class</span> <span class="title class_">TemplateRef</span>&lt;C&gt; &#123;</span><br><span class="line">  abstract <span class="attr">elementRef</span>: <span class="title class_">ElementRef</span></span><br><span class="line">  abstract <span class="title function_">createEmbeddedView</span>(<span class="attr">context</span>: C): <span class="title class_">EmbeddedViewRef</span>&lt;C&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> templateRef创建Embedded Views视图的方法如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">@<span class="title class_">ViewChild</span>(<span class="string">&#x27;tp1&#x27;</span>) <span class="attr">tp1</span>: <span class="title class_">TemplateRef</span>&lt;any&gt;;</span><br><span class="line"><span class="keyword">const</span> view = <span class="variable language_">this</span>.<span class="property">tp1</span>.<span class="title function_">createEmbeddedView</span>(<span class="literal">null</span>);</span><br></pre></td></tr></table></figure>

<h1 id="ViewContainerRef"><a href="#ViewContainerRef" class="headerlink" title="ViewContainerRef"></a>ViewContainerRef</h1><p>动态视图的核心是视图容器，它决定了视图的插入位置，用 ViewContainerRef 类表示。要创建它很简单，假设组件视图中有：<code>&lt;ng-container #dynamicHost&gt;&lt;/ng-container&gt;</code> 通过 <code>@ViewChild</code> 装饰器读取即可：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@<span class="title class_">ViewChild</span>(<span class="string">&#x27;dynamicHost&#x27;</span>, &#123; <span class="attr">read</span>: <span class="title class_">ViewContainerRef</span> &#125;) container!: <span class="title class_">ViewContainerRef</span>;</span><br></pre></td></tr></table></figure>
<p>这段代码的注意点有：</p>
<ul>
<li><code>@ViewChild</code> 用来从组件视图中获取元素的引用，可以是 DOM 对象、子组件或者指令的实例、或是某个依赖注入的 Provider。</li>
<li>第二个参数中的 read 指示具体获取哪个类型，例如从 <code>&lt;button mat-button&gt; </code>可以获取到这个 button 元素对象，也可以是这个标签上添加的 Material 按钮指令。</li>
<li>要获取一个容器，并非只能使用 <code>&lt;ng-container&gt;</code>，<code>&lt;ng-template&gt;</code> 、组件或者别的 DOM 标签都可以。</li>
<li>虽然是叫容器，不过插入的内容可不是在这个 <code>&lt;ng-container&gt; </code>标签内，而是在它的下方（类似 <code>&lt;router-outlet&gt;</code>）。所以使用 <code>ng-container</code> 是为了不渲染多余的 DOM。</li>
</ul>
<p>ViewContainerRef 实例可以创建、插入、移除、移动或是销毁它其中的视图（ViewRef）。视图代表着 Angular中可显示元素的最小分组单位，它由组件或者模板定义。多个视图构造成了 Angular 应用的视图树。</p>
<p>简明起见，后文都将 ViewContainerRef 实例称之为 “视图容器”</p>
<h2 id="以代码方式插入"><a href="#以代码方式插入" class="headerlink" title="以代码方式插入"></a>以代码方式插入</h2><p>视图容器有两个方法（createComponent，createEmbeddedView），用来动态创建组件视图和模板视图。</p>
<h3 id="动态插入组件"><a href="#动态插入组件" class="headerlink" title="动态插入组件"></a>动态插入组件</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div class=&quot;alert-container mat-elevation-z2&quot; [class]=&quot;classConfig()&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;span class=&quot;message&quot;&gt;&#123;&#123;message&#125;&#125;&lt;/span&gt;</span></span><br><span class="line"><span class="string">        &lt;button mat-button (click)=&quot;emitCloseEvent()&quot;&gt;关闭&lt;/button&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;`</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">AlertComponent</span> &#123;</span><br><span class="line">    <span class="meta">@Input</span>() message = <span class="string">&#x27;空消息提示&#x27;</span>;</span><br><span class="line">    <span class="meta">@Input</span>() <span class="keyword">type</span> = <span class="string">&#x27;success&#x27;</span>;</span><br><span class="line">    <span class="meta">@Output</span>() closeAlert = <span class="keyword">new</span> <span class="title class_">EventEmitter</span>();</span><br><span class="line">    <span class="title function_">classConfig</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">success</span>: <span class="variable language_">this</span>.<span class="property">type</span> === <span class="string">&#x27;success&#x27;</span>,</span><br><span class="line">            <span class="attr">warning</span>: <span class="variable language_">this</span>.<span class="property">type</span> === <span class="string">&#x27;warning&#x27;</span></span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span></span><br><span class="line"></span><br><span class="line">    <span class="title function_">emitCloseEvent</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">closeAlert</span>.<span class="title function_">emit</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这个组件有两个输入属性，一个输出事件。以便演示动态创建的组件，如何和外界交互。</p>
<p>通知组件写好后，就可以创建并动态插入，将这个对象传入视图容器的 createComponent 方法。通过 createComponent 方法，就可以将这个组件插入到视图中了，并返回这个组件实例。</p>
<p>有了组件实例，和这个通知组件交互也就不成问题了：</p>
<ul>
<li>输入属性传值：componentRef.instance.message &#x3D; “外部传入的警告信息”。</li>
<li>绑定输出事件：</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">componentRef.<span class="property">instance</span>.<span class="property">closeAlert</span>.<span class="title function_">subscribe</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> index = <span class="variable language_">this</span>.<span class="property">container</span>.<span class="title function_">indexOf</span>(componentRef.<span class="property">hostView</span>);</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">container</span>.<span class="title function_">remove</span>(index);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><img src="1bfc4fcb11e137fc961c037e86d5fd241f46f27317e712ddeee7128fbdd6cbb6.png" alt="图 0">  </p>
<h3 id="动态插入模板"><a href="#动态插入模板" class="headerlink" title="动态插入模板"></a>动态插入模板</h3><p>和 createComponent 类似的，通过 createEmbeddedView 就可以插入模板。</p>
<p>首先先创建一个模板示例，这个模板根据上下文对象声明了一个 “param” 属性：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ng-template</span> #<span class="attr">templateView</span> <span class="attr">let-param</span>=<span class="string">&quot;message&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;template-wrapper&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>来自 ng-template 的动态内容<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;param&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ng-template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>要插入一个带上下文数据的模板，具体分为三步：</p>
<ol>
<li><p>获取模板的引用对象：<br><code>@ViewChild(&#39;templateView&#39;, &#123; read: TemplateRef &#125;) template!: TemplateRef&lt;any&gt;;</code></p>
</li>
<li><p>声明上下文对象：</p>
</li>
</ol>
<p><code>templateContext = &#123; message: &#39;来自模板上下文的值&#39; &#125;;</code></p>
<ol start="3">
<li><p>通过视图容器的 createEmbeddedView 方法插入模板：</p>
<p><code>const embeddedViewRef = this.container.createEmbeddedView(this.template, this.templateContext);</code></p>
</li>
</ol>
<p>方法创建一个 EmbeddedViewRef 对象，并将它放入。通过这个对象，视图容器可以查找它的索引，所以也可以和之前组件视图的引用一样，在容器内移动顺序、移除渲染、或是被销毁。</p>
<p><img src="6a1365efdf41b72059b52cbc5896f47936453faf94ca1dfc203f5446cdc00fac.png" alt="图 1">  </p>
<h3 id="以指令方式插入"><a href="#以指令方式插入" class="headerlink" title="以指令方式插入"></a>以指令方式插入</h3><p>除了使用视图容器的两个方法来创建和插入视图，Angular 还提供了两个指令来简化工作。</p>
<h4 id="ngComponentOutlet"><a href="#ngComponentOutlet" class="headerlink" title="ngComponentOutlet"></a>ngComponentOutlet</h4><p>首先，再创建另一个示例组件，和前面的哪个通知组件不同，它没有输入输出属性，但是多了一个需要注入的依赖项，以便演示带依赖注入的组件插入：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@<span class="title class_">Component</span>(&#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;section class=&quot;template-wrapper&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;span&gt;来自另一个动态组件：&#123;&#123;param.message&#125;&#125;&lt;/span&gt;</span></span><br><span class="line"><span class="string">    &lt;/section&gt;`</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">AnotherComponent</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">public param: ExampleService</span>) &#123; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用指令的方式创建组件就简单多了，只需要两步：</p>
<ol>
<li><p>引入这个组件类，并赋值给一个属性：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AnotherComponent</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../shared/another-component&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">ViewContainerExampleComponent</span> implements <span class="title class_">OnInit</span>, <span class="title class_">OnDestroy</span> &#123;</span><br><span class="line">     public anotherComponent = <span class="title class_">AnotherComponent</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在视图中声明即可：</p>
</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ng-container</span> *<span class="attr">ngComponentOutlet</span>=<span class="string">&quot;anotherComponent&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ng-container</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>传入依赖注入器</strong></p>
<p>正常情况下，这样就把组件插入指定位置了，不过如果动态组件所声明的依赖项，需要由这个组件本身提供呢？</p>
<p>这里就要再给这个组件传入注入对象:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;ng-container *ngComponentOutlet=&quot;anotherComponent;injector:costumeInjector&quot;&gt;</span><br></pre></td></tr></table></figure>
<p>这个 costumeInjector 可以通过 Injector 类的静态方法创建：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="title function_">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">    injector: Injector</span></span><br><span class="line"><span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">costumeInjector</span> = <span class="title class_">Injector</span>.<span class="title function_">create</span>(&#123; </span><br><span class="line">        <span class="attr">providers</span>: [&#123; <span class="attr">provide</span>: <span class="title class_">ExampleService</span>, <span class="attr">deps</span>: [] &#125;], </span><br><span class="line">        <span class="attr">parent</span>: injector </span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样一来，每个动态创建的组件，都会拥有一个独立的 ExampleService 实例。</p>
<p>✨ 视图容器的 createComponent 方法同样可以指定依赖注入器，效果是一样的，前面只是为了简明而省略。</p>
<p>当然，常见的情况依旧是给 ExampleService 的装饰器声明为全局服务：@Injectable({ providedIn:’root’})</p>
<p><strong>传入内容映射</strong></p>
<p>除了可以指定注入器，还可以传入内容映射。</p>
<p>先给组件做一点小修改，新增一个 <ng-content> 标记，使得这个组件可以接收外部内容映射：</ng-content></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;section class=&quot;template-wrapper&quot;&gt;</span><br><span class="line">    &lt;span&gt;来自另一个动态组件：&#123;&#123;param.message&#125;&#125;&lt;/span&gt;</span><br><span class="line">    &lt;ng-content&gt;&lt;/ng-content&gt;</span><br><span class="line">&lt;/section&gt;`</span><br></pre></td></tr></table></figure>
<p>要插入映射的 DOM 内容，只需要额外给指令的表达式再传一个参数：<br><code>&lt;ng-container *ngComponentOutlet=&quot;anotherComponent;content:costumeContent&quot;&gt;</code></p>
<p>这个 costumeContent 是一个数组，因为组件内可以有多个 ng-content。数组内每项也是一个数组，因为每个 ng-content 位置，可以插入多个 DOM 内容块。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> spanContent = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;span&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> divContent = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">spanContent.<span class="property">innerHTML</span> = <span class="string">&#x27;hello, world&#x27;</span>;</span><br><span class="line">divContent.<span class="property">innerHTML</span> = <span class="string">&#x27;&lt;span&gt;locotor&lt;/span&gt;&#x27;</span>;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">costumeContent</span> = [[spanContent, divContent]];</span><br></pre></td></tr></table></figure>

<p><strong>ngTemplateOutlet</strong></p>
<p>模板的指令只有两个输入属性：模板的引用对象、模板的上下文对象。</p>
<p>所以要插入一个带上下文数据的模板，具体步骤如下：</p>
<ol>
<li>给模板添加引用名：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;ng-template #templateView let-param=&quot;message&quot;&gt;</span><br><span class="line">     &lt;!-- 省略内容 --&gt;</span><br><span class="line">&lt;/ng-template&gt;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>声明上下文对象：<br><code>templateContext = &#123; message: &#39;来自模板上下文的值&#39; &#125;;</code></li>
<li>传入 ngTemplateOutlet 指令中：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;ng-container *ngTemplateOutlet=&quot;templateView; context: templateContext&quot;&gt;&lt;/ng-container&gt;</span><br></pre></td></tr></table></figure>



<h1 id="ElementRef"><a href="#ElementRef" class="headerlink" title="ElementRef"></a>ElementRef</h1><p>Angular 的口号是 - “一套框架，多种平台，即同时适用手机与桌面。在应用层直接操作 DOM，就会造成应用层与渲染层之间强耦合，导致我们的应用无法运行在不同环境，通过 ElementRef 我们就可以封装不同平台下视图层中的 native 元素 (在浏览器环境中，native 元素通常是指 DOM 元素)，最后借助于 Angular 提供的强大的依赖注入特性，我们就可以轻松地访问到 native 元素。</p>
<p>ElementRef定义如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ElementRef</span>&lt;T&gt; &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">nativeElement: T</span>)</span><br><span class="line">  <span class="attr">nativeElement</span>: T</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="ViewRef"><a href="#ViewRef" class="headerlink" title="ViewRef"></a>ViewRef</h1><p>抽象类定义：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">abstract <span class="keyword">class</span> <span class="title class_">ViewRef</span> <span class="keyword">extends</span> <span class="title class_ inherited__">ChangeDetectorRef</span> &#123;</span><br><span class="line">  abstract <span class="attr">destroyed</span>: boolean</span><br><span class="line">  abstract <span class="title function_">destroy</span>(): <span class="keyword">void</span></span><br><span class="line">  abstract <span class="title function_">onDestroy</span>(<span class="attr">callback</span>: <span class="title class_">Function</span>): any</span><br><span class="line"> </span><br><span class="line">  <span class="comment">// 继承自 core/ChangeDetectorRef</span></span><br><span class="line">  abstract <span class="title function_">markForCheck</span>(): <span class="keyword">void</span></span><br><span class="line">  abstract <span class="title function_">detach</span>(): <span class="keyword">void</span></span><br><span class="line">  abstract <span class="title function_">detectChanges</span>(): <span class="keyword">void</span></span><br><span class="line">  abstract <span class="title function_">checkNoChanges</span>(): <span class="keyword">void</span></span><br><span class="line">  abstract <span class="title function_">reattach</span>(): <span class="keyword">void</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> ViewRef 用于表示 Angular View(视图)，视图是可视化的 UI 界面。EmbeddedViewRef 继承于 ViewRef，用于表示 <template> 模板元素中定义的 UI 元素。</template></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetao50.github.io/2023/11/22/css/%E6%8B%96%E6%8B%BD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="InfoPool">
      <meta itemprop="description" content="记录信息来源网络，内容只为方便查找，非公开信息，非请勿入">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | InfoPool">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/11/22/css/%E6%8B%96%E6%8B%BD/" class="post-title-link" itemprop="url">拖拽</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2023-11-22 10:19:45 / 修改时间：19:06:59" itemprop="dateCreated datePublished" datetime="2023-11-22T10:19:45+08:00">2023-11-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>HTML 拖放（Drag and Drop）接口使应用程序能够在浏览器中使用拖放功能。例如，用户可使用鼠标选择可拖拽（draggable）元素，将元素拖拽到可放置（droppable）元素，并释放鼠标按钮以放置这些元素。拖拽操作期间，会有一个可拖拽元素的半透明快照跟随着鼠标指针。</p>
<h1 id="拖拽事件"><a href="#拖拽事件" class="headerlink" title="拖拽事件"></a>拖拽事件</h1><p>HTML 的 drag &amp; drop 使用了 DOM event model 以及从 mouse events 继承而来的 drag events。一个典型的拖拽操作是这样的：用户选中一个<em>可拖拽的（draggable）元素，并将其拖拽（鼠标不放开）到一个可放置的（droppable）</em>元素，然后释放鼠标。</p>
<p>在操作期间，会触发一些事件类型，有一些事件类型可能会被多次触发（比如drag 和 dragover 事件类型）。</p>
<p>下面的表格提供了一个简短的事件类型描述，以及一个相关文档的链接。</p>
<table>
<thead>
<tr>
<th>事件</th>
<th>事件处理程序</th>
<th>触发时刻</th>
</tr>
</thead>
<tbody><tr>
<td>drag</td>
<td>ondrag</td>
<td>当拖拽元素或选中的文本时触发</td>
</tr>
<tr>
<td>dragend</td>
<td>ondragend</td>
<td>当拖拽操作结束时触发 (比如松开鼠标按键或敲“Esc”键)</td>
</tr>
<tr>
<td>dragenter</td>
<td>ondragenter</td>
<td>当拖拽元素或选中的文本到一个可释放目标时触发</td>
</tr>
<tr>
<td>dragleave</td>
<td>ondragleave</td>
<td>当拖拽元素或选中的文本离开一个可释放目标时触发</td>
</tr>
<tr>
<td>dragover</td>
<td>ondragover</td>
<td>当元素或选中的文本被拖到一个可释放目标上时触发（每 100 毫秒触发一次）</td>
</tr>
<tr>
<td>dragstart</td>
<td>ondragstart</td>
<td>当用户开始拖拽一个元素或选中的文本时触发</td>
</tr>
<tr>
<td>drop</td>
<td>ondrop</td>
<td>当元素或选中的文本在可释放目标上被释放时触发</td>
</tr>
</tbody></table>
<p><strong>注意：</strong>当从操作系统向浏览器中拖拽文件时，不会触发 dragstart 和dragend 事件。</p>
<h1 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h1><h2 id="确定什么是可拖拽的"><a href="#确定什么是可拖拽的" class="headerlink" title="确定什么是可拖拽的"></a>确定什么是可拖拽的</h2><p>让一个元素被拖拽需要添加 draggable 属性，再加上事件处理函数 ondragstart;</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">dragstart_handler</span>(<span class="params">ev</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// Add the target element&#x27;s id to the data transfer object</span></span></span><br><span class="line"><span class="language-javascript">    ev.<span class="property">dataTransfer</span>.<span class="title function_">setData</span>(<span class="string">&quot;text/plain&quot;</span>, ev.<span class="property">target</span>.<span class="property">id</span>);</span></span><br><span class="line"><span class="language-javascript">    ev.<span class="property">dataTransfer</span>.<span class="title function_">setData</span>(</span></span><br><span class="line"><span class="language-javascript">    <span class="string">&quot;text/uri-list&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">    ev.<span class="property">target</span>.<span class="property">ownerDocument</span>.<span class="property">location</span>.<span class="property">href</span>,</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;DOMContentLoaded&quot;</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// Get the element by id</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> element = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;p1&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// Add the ondragstart event listener</span></span></span><br><span class="line"><span class="language-javascript">    element.<span class="title function_">addEventListener</span>(<span class="string">&quot;dragstart&quot;</span>, dragstart_handler);</span></span><br><span class="line"><span class="language-javascript">  &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;p1&quot;</span> <span class="attr">draggable</span>=<span class="string">&quot;true&quot;</span>&gt;</span>This element is draggable.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="定义拖拽数据"><a href="#定义拖拽数据" class="headerlink" title="定义拖拽数据"></a>定义拖拽数据</h2><p>每个 dragevent 都有一个dataTransfer 属性，其中保存着事件的数据。这个属性也有管理拖拽数据的方法。setData() 方法为拖拽数据添加一个项，如下面的示例代码所示：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加拖拽数据</span></span><br><span class="line">ev.<span class="property">dataTransfer</span>.<span class="title function_">setData</span>(<span class="string">&quot;text/plain&quot;</span>, ev.<span class="property">target</span>.<span class="property">innerText</span>);</span><br><span class="line">ev.<span class="property">dataTransfer</span>.<span class="title function_">setData</span>(<span class="string">&quot;text/html&quot;</span>, ev.<span class="property">target</span>.<span class="property">outerHTML</span>);</span><br><span class="line">ev.<span class="property">dataTransfer</span>.<span class="title function_">setData</span>(</span><br><span class="line">  <span class="string">&quot;text/uri-list&quot;</span>,</span><br><span class="line">  ev.<span class="property">target</span>.<span class="property">ownerDocument</span>.<span class="property">location</span>.<span class="property">href</span>,</span><br></pre></td></tr></table></figure>

<p>如果你试图以相同的格式添加两次数据，那么新的数据将替换旧的数据。你可以使用 clearData() 方法清除这些数据，该方法接收一个参数，即要删除的数据类型。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">event.<span class="property">dataTransfer</span>.<span class="title function_">clearData</span>(<span class="string">&quot;text/uri-list&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>clearData()方法的 type 参数是可选的。如果没有声明type，则所有类型的数据都会被删除。如果拖拽不包含拖拽数据项，或者所有的数据项都被清除，那么就不会出现拖拽行为。</p>
<h2 id="定义拖拽图像"><a href="#定义拖拽图像" class="headerlink" title="定义拖拽图像"></a>定义拖拽图像</h2><p>拖拽过程中，浏览器会在鼠标旁显示一张默认图片。当然，应用程序也可以通过 setDragImage() 方法自定义一张图片</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> img = <span class="keyword">new</span> <span class="title class_">Image</span>();</span><br><span class="line">img.<span class="property">src</span> = <span class="string">&quot;example.gif&quot;</span>;</span><br><span class="line">ev.<span class="property">dataTransfer</span>.<span class="title function_">setDragImage</span>(img, <span class="number">10</span>, <span class="number">10</span>);</span><br></pre></td></tr></table></figure>

<h2 id="定义拖拽效果"><a href="#定义拖拽效果" class="headerlink" title="定义拖拽效果"></a>定义拖拽效果</h2><p>dropEffect 属性用来控制拖放操作中用户给予的反馈。它会影响到拖拽过程中浏览器显示的鼠标样式。比如，当用户悬停在目标元素上的时候，浏览器鼠标也许要反映拖放操作的类型。</p>
<p><strong>有以下效果可以定义：</strong></p>
<ol>
<li>copy 表明被拖拽的数据将从它原本的位置拷贝到目标的位置。</li>
<li>move 表明被拖拽的数据将被移动。</li>
<li>link 表明在拖拽源位置和目标位置之间将会创建一些关系表格或是连接。</li>
<li>none 不允许操作</li>
</ol>
<p>属性默认允许以上所有的操作（all），所以你不需要调整这个属性，除非你想要排除某个特定操作。在拖拽过程中，拖拽效果也许会被修改以用于表明在具体位置上具体效果是否被允许，如果允许，在该位置则被允许放置。</p>
<p><strong>可以使用 none 表示在这个位置不允许任何放置</strong></p>
<p><code>  ev.dataTransfer.dropEffect = &quot;copy&quot;;</code></p>
<h2 id="指定放置目标"><a href="#指定放置目标" class="headerlink" title="指定放置目标"></a>指定放置目标</h2><p>当拖拽一个项目到 HTML 元素中时，浏览器默认不会有任何响应。想要让一个元素变成可释放区域，该元素必须设置 ondragover和ondrop事件处理程序属性。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">dragover_handler</span>(<span class="params">ev</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    ev.<span class="title function_">preventDefault</span>();</span></span><br><span class="line"><span class="language-javascript">    ev.<span class="property">dataTransfer</span>.<span class="property">dropEffect</span> = <span class="string">&quot;move&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">drop_handler</span>(<span class="params">ev</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    ev.<span class="title function_">preventDefault</span>();</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// Get the id of the target and add the moved element to the target&#x27;s DOM</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> data = ev.<span class="property">dataTransfer</span>.<span class="title function_">getData</span>(<span class="string">&quot;text/plain&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    ev.<span class="property">target</span>.<span class="title function_">appendChild</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(data));</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span></span></span><br><span class="line"><span class="tag">  <span class="attr">id</span>=<span class="string">&quot;target&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">ondrop</span>=<span class="string">&quot;drop_handler(event)&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">ondragover</span>=<span class="string">&quot;dragover_handler(event)&quot;</span>&gt;</span></span><br><span class="line">  Drop Zone</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>如果你想要允许放置，你必须取消 dragenter 和 dragover 事件来阻止默认的处理。你可以在属性定义的事件监听程序返回 false，或者调用事件的 preventDefault() 方法来实现这一点。</p>
<p>在 dragenter 和 dragover 事件中调用 preventDefault() 方法将表明在该位置允许放置。但是，你通常希望只在某些情况下调用 preventDefault() 方法（如只当拖拽的是链接时）。</p>
<p>要做到这一点，调用一个函数以检查条件，并且只在满足条件时取消事件。如果条件未满足，则不取消事件，此时用户释放鼠标按钮不会执行放置。</p>
<p>最常见的是根据数据传输中拖拽数据的类型来接受或拒绝放置——例如，允许放置图像或链接，或者都允许。你可以检查 dataTransfer 属性的 types 属性来查看哪些类型允许放置。types 属性返回一个字符串类型的数组，这些字符串类型是在拖拽开始时添加的，顺序是从最重要到最不重要。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">contains</span>(<span class="params">list, value</span>) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; list.<span class="property">length</span>; ++i) &#123;</span><br><span class="line">    <span class="keyword">if</span> (list[i] === value) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">doDragOver</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> isLink = <span class="title function_">contains</span>(event.<span class="property">dataTransfer</span>.<span class="property">types</span>, <span class="string">&quot;text/uri-list&quot;</span>);</span><br><span class="line">  <span class="keyword">if</span> (isLink) &#123;</span><br><span class="line">    event.<span class="title function_">preventDefault</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果你希望更具体地限制操作类型，你可能还需要设置 effectAllowed 或 dropEffect 属性，或者两者都设置。当然，如果你不取消这个事件，改变这两个属性不会有任何效果。</p>
<h2 id="放置反馈"><a href="#放置反馈" class="headerlink" title="放置反馈"></a>放置反馈</h2><p>你还可以根据需要更新用户界面，如添加一个插入标记或使用高亮显示。对于简单的高亮显示，你可以在放置目标上使用 -moz-drag-over CSS 伪类。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.droparea</span>:-moz-drag-over &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在这个例子中，当带有 droparea 类的元素是一个有效的放置目标时，即在该元素的 dragenter 事件中调用 preventDefault() 方法时，元素会出现一个 1 像素的黑色轮廓。</p>
<p>要使这个伪类生效，你必须在 dragenter 事件中调用 preventDefault() 方法，因为这个伪类状态不会检查 dragover 事件（译者注：即在 dragover 事件中调用 preventDefault() 方法也不会使伪类生效，尽管这个伪类叫做“-moz-drag-over”）。</p>
<p>你可以在 dragenter 事件中执行其他操作。例如在放置位置插入一个元素，这样的元素可以表示一个插入标记，或表示被拖拽的元素移动到了新位置。为此你可以在 dragenter 事件中创建一个新元素，然后将其插入到文档中。</p>
<p>dragover 事件在鼠标指向的元素上触发。自然，你可能需要将插入标记移动到事件发生的位置附近。你可以使用事件的 clientX 和 clientY 属性，还有其他鼠标事件的属性来确定鼠标的位置。</p>
<p>最后，dragleave 事件会在拖拽离开元素时在该元素上触发。这是移除插入标记或高亮的好时机。你不需要取消这个事件（译者注：即不需要使用 preventDefault()）。使用 -moz-drag-over 伪类设置的高亮或其他视觉效果会被自动移除。即使拖拽被取消了，dragleave 事件也会照常触发，所以你可以确保在这个事件中对任何插入标记的清除操作都一定可以完成。</p>
<h2 id="执行放置"><a href="#执行放置" class="headerlink" title="执行放置"></a>执行放置</h2><p>如果在有效的放置目标元素上放开鼠标，放置会成功实现，drop 事件在目标元素上被触发。否则，拖拽会被取消，不会触发 drop 事件。</p>
<p>在所有拖拽操作相关的事件中，事件的 dataTransfer 属性会一直保存着拖拽数据。可使用 getData() 方法来取回数据。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">onDrop</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> data = event.<span class="property">dataTransfer</span>.<span class="title function_">getData</span>(<span class="string">&quot;text/plain&quot;</span>);</span><br><span class="line">  event.<span class="property">target</span>.<span class="property">textContent</span> = data;</span><br><span class="line">  event.<span class="title function_">preventDefault</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="完成拖拽"><a href="#完成拖拽" class="headerlink" title="完成拖拽"></a>完成拖拽</h2><p>拖拽操作结束时，在源元素（开始拖拽时的目标元素）上触发 dragend 事件。不管拖拽是完成还是被取消这个事件都会被触发。dragend 事件处理程序可以检查dropEffect 属性的值来确认拖拽成功与否。</p>
<p>如果在 dragend 事件中，dropEffect 属性值为 none，则拖拽会被取消。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetao50.github.io/2023/11/21/angular/%E8%87%AA%E5%AE%9A%E4%B9%89%E8%A1%A8%E5%8D%95%E6%8E%A7%E4%BB%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="InfoPool">
      <meta itemprop="description" content="记录信息来源网络，内容只为方便查找，非公开信息，非请勿入">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | InfoPool">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/11/21/angular/%E8%87%AA%E5%AE%9A%E4%B9%89%E8%A1%A8%E5%8D%95%E6%8E%A7%E4%BB%B6/" class="post-title-link" itemprop="url">自定义表单控件</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2023-11-21 16:37:37 / 修改时间：16:53:30" itemprop="dateCreated datePublished" datetime="2023-11-21T16:37:37+08:00">2023-11-21</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetao50.github.io/2023/09/13/css/BFC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="InfoPool">
      <meta itemprop="description" content="记录信息来源网络，内容只为方便查找，非公开信息，非请勿入">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | InfoPool">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/09/13/css/BFC/" class="post-title-link" itemprop="url">BFC</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-09-13 14:03:48" itemprop="dateCreated datePublished" datetime="2023-09-13T14:03:48+08:00">2023-09-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-09-14 10:47:56" itemprop="dateModified" datetime="2023-09-14T10:47:56+08:00">2023-09-14</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>在解释BFC之前，先说一下文档流。我们常说的文档流其实分为定位流、浮动流、普通流三种。而普通流其实就是指BFC中的FC。FC(Formatting Context)，直译过来是格式化上下文，它是页面中的一块渲染区域，有一套渲染规则，决定了其子元素如何布局，以及和其他元素之间的关系和作用。常见的FC有BFC、IFC，还有GFC和FFC。</p>
<p>BFC(Block Formatting Context)块级格式化上下文，是用于布局块级盒子的一块渲染区域。MDN上的解释：BFC是Web页面 CSS 视觉渲染的一部分，用于决定块盒子的布局及浮动相互影响范围的一个区域。</p>
<p>注意：一个BFC的范围包含创建该上下文元素的所有子元素，但不包括创建了新BFC的子元素的内部元素。这从另一方角度说明，一个元素不能同时存在于两个BFC中。因为如果一个元素能够同时处于两个BFC中，那么就意味着这个元素能与两个BFC中的元素发生作用，就违反了BFC的隔离作用。</p>
<h1 id="形成BFC的条件"><a href="#形成BFC的条件" class="headerlink" title="形成BFC的条件"></a>形成BFC的条件</h1><p>1、根元素，即HTML元素<br>1、浮动元素，float 除 none 以外的值；<br>2、定位元素，position（absolute，fixed）；<br>3、display 为以下其中之一的值 inline-block，table-cell，table-caption；<br>4、overflow 除了 visible 以外的值（hidden，auto，scroll）；</p>
<h1 id="BFC布局规则"><a href="#BFC布局规则" class="headerlink" title="BFC布局规则"></a>BFC布局规则</h1><p>1.内部的Box会在垂直方向，一个接一个地放置。<br>2.Box垂直方向的距离由margin决定。属于同一个BFC的两个相邻Box的margin会发生重叠<br>3.每个元素的margin box的左边， 与包含块border box的左边相接触(对于从左往右的格式化，否则相反)。即使存在浮动也是如此。<br>4.BFC的区域不会与float box重叠。<br>5.BFC就是页面上的一个隔离的独立容器，容器里面的子元素不会影响到外面的元素。反之也如此。<br>6.计算BFC的高度时，浮动元素也参与计算</p>
<h1 id="BFC可以解决哪些问题？"><a href="#BFC可以解决哪些问题？" class="headerlink" title="BFC可以解决哪些问题？"></a>BFC可以解决哪些问题？</h1><h2 id="解决浮动元素令父元素高度坍塌的问题"><a href="#解决浮动元素令父元素高度坍塌的问题" class="headerlink" title="解决浮动元素令父元素高度坍塌的问题"></a>解决浮动元素令父元素高度坍塌的问题</h2><p>方法：给父元素开启BFC</p>
<p>原理：计算BFC的高度时，浮动子元素也参与计算</p>
<p><img src="e08cd932da3c1bb73985d5f7f95be8b915100e106d88d69f40e3b79640ca9ac7.gif" alt="图 0">  </p>
<h2 id="非浮动元素被浮动元素覆盖"><a href="#非浮动元素被浮动元素覆盖" class="headerlink" title="非浮动元素被浮动元素覆盖"></a>非浮动元素被浮动元素覆盖</h2><p>方法：给非浮动元素开启BFC<br>原理：BFC的区域不会与float box重叠</p>
<p><img src="b4cb7790eae5a654ae061fa5309eb6d3571626b0b0862a2cac40b6583fcf9eb1.gif" alt="图 1">  </p>
<h2 id="两栏自适应布局"><a href="#两栏自适应布局" class="headerlink" title="两栏自适应布局"></a>两栏自适应布局</h2><p>方法：给固定栏设置固定宽度，给不固定栏开启BFC。<br>原理：BFC的区域不会与float box重叠</p>
<p><img src="dcff3c37a4044b8b63f87a76c3f0de8308a29b7f7cb4d24cce4843b51403482b.gif" alt="图 2">  </p>
<h2 id="外边距垂直方向重合的问题"><a href="#外边距垂直方向重合的问题" class="headerlink" title="外边距垂直方向重合的问题"></a>外边距垂直方向重合的问题</h2><p>方法：给上box或者下box任意一个包裹新的box并开启BFC</p>
<p>原理：属于同一个BFC的两个相邻的Box的margin会发生重叠。</p>
<p><img src="4a5dcc763f200d0b9acc45663006f3dfc298726bc131aec36b23b4a5cf5650fd.gif" alt="图 3">  </p>
<h1 id="IFC"><a href="#IFC" class="headerlink" title="IFC"></a>IFC</h1><p>内联格式化上下文，是用于 布局内联元素 盒子的一块 渲染区域。</p>
<h1 id="IFC的形成条件"><a href="#IFC的形成条件" class="headerlink" title="IFC的形成条件"></a>IFC的形成条件</h1><p>块级元素中仅包含内联级别元素</p>
<h1 id="IFC的布局规则"><a href="#IFC的布局规则" class="headerlink" title="IFC的布局规则"></a>IFC的布局规则</h1><ol>
<li><p>盒是从包含块的顶部开始一个挨一个水平放置的</p>
</li>
<li><p>水平padding、border、margin都有效，垂直方向上不被计算。</p>
</li>
<li><p>在垂直方向上，子元素会以不同形式来对齐vertical-align</p>
</li>
<li><p>能把在一行上的框都完全包含进去的一个矩形区域，被称为该行的行框（line box）。行框的宽度是由包含块（containing box）和与其中的浮动来决定。</p>
</li>
<li><p>IFC中的“line box”一般左右边贴紧其包含块，但float元素会优先排列。</p>
</li>
<li><p>IFC中的“line box”高度由 CSS 行高计算规则来确定，同个IFC下的多个line box高度可能会不同。</p>
</li>
<li><p>当 inline-level boxes的总宽度少于包含它们的line box时，其水平渲染规则由text-align 属性值来决定。</p>
</li>
<li><p>当一个“inline box”超过父元素的宽度时，它会被分割成多个boxes，这些 boxes 分布在多个“line box”中。如果子元素未设置强制换行的情况下，“inline box”将不可被分割，将会溢出父元素。</p>
</li>
</ol>
<h1 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h1><h2 id="元素垂直居中"><a href="#元素垂直居中" class="headerlink" title="元素垂直居中"></a>元素垂直居中</h2><p>布局规则第3条：在垂直方向上，子元素会以不同形式来对齐vertical-align</p>
<p><img src="d5eeb20176f5ae3f0fcf8c458f1a782b8871050c7f0353d12b94c93a92d22be7.png" alt="图 4"><br>想要实现文字与图片垂直居中，只要给图片加上一个vertical-align: middle 属性就可以实现：</p>
<p><img src="e3c77e1986f3bc232531801cefe9c202fbdb91391a8f6b5afa4a1765dce0a075.png" alt="图 5">  </p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetao50.github.io/2023/09/12/css/position%E5%B1%9E%E6%80%A7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="InfoPool">
      <meta itemprop="description" content="记录信息来源网络，内容只为方便查找，非公开信息，非请勿入">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | InfoPool">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/09/12/css/position%E5%B1%9E%E6%80%A7/" class="post-title-link" itemprop="url">position属性</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-09-12 16:33:24" itemprop="dateCreated datePublished" datetime="2023-09-12T16:33:24+08:00">2023-09-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-09-13 17:43:36" itemprop="dateModified" datetime="2023-09-13T17:43:36+08:00">2023-09-13</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="标准流（Normal-Flow）"><a href="#标准流（Normal-Flow）" class="headerlink" title="标准流（Normal Flow）"></a>标准流（Normal Flow）</h1><p>默认情况下，元素都是按照normal flow（标准流、常规流、正常流、文档流）进行排布的。</p>
<ul>
<li>排布顺序：在浏览器中从左到右，从上到下顺序摆放；</li>
<li>默认情况下，元素互相之间不存在层叠现象；<br><img src="0e42e9d5a768760de16315b26c650b65daaf67a0492dc03c1a68f4d6071a3ddc.png" alt="图 0"></li>
</ul>
<h1 id="什么情况下元素会脱标？"><a href="#什么情况下元素会脱标？" class="headerlink" title="什么情况下元素会脱标？"></a>什么情况下元素会脱标？</h1><p>脱离标准流（简称“脱标”），那么什么情况下元素会脱离标准流呢？常见有以下两种：</p>
<ul>
<li>元素设置position，并且position的值为fixed或absolute；</li>
<li>元素添加浮动float，并且float的值不为none；</li>
</ul>
<h1 id="脱标元素的特点"><a href="#脱标元素的特点" class="headerlink" title="脱标元素的特点"></a>脱标元素的特点</h1><ol>
<li>可以随意设置宽高，宽高默认由内容决定。<ul>
<li>块级元素：在标准流下，默认占满父元素的宽度；脱标后，宽高由内容撑开。</li>
<li>行内元素：在标准流下，默认由内容撑开，且不能设置宽高；脱标后，宽高还是由内容撑开，但是可以设置宽高。</li>
</ul>
</li>
<li>不再受标准流的约束。</li>
<li>不再给父元素汇报宽高数据，也就是不能将父元素撑开。</li>
</ol>
<h1 id="脱标和display有什么关系？"><a href="#脱标和display有什么关系？" class="headerlink" title="脱标和display有什么关系？"></a>脱标和display有什么关系？</h1><p>根据以上脱标元素的特点，可能会有人认为脱标其实就是将元素转换成了inline-block，因为其展示效果和设置display: inline-block;效果一致，但是其中的原因却不是这样。</p>
<p>当不同元素进行了脱标，对应会展示成display的何种属性值？在MDN和W3C官方网站上都有进行解释，并且提供了参考表格：</p>
<ul>
<li><p>MDN中，以搜索float属性为例；<br><img src="42ba9fef374c275a4c42285c2fdd924a85b027555a8cc5a1b94df4bc8ea61d90.png" alt="图 1">  </p>
</li>
<li><p>在W3C官方文档中，有关于display、position和float之间的关系进行了说明；</p>
</li>
</ul>
<p><img src="40613bd478d4a35cb25711c689b397f7690b155aaee9b8f4aa526eff842543f9.png" alt="图 2">  </p>
<h1 id="大部分元素在脱标后都会转换成block类型。"><a href="#大部分元素在脱标后都会转换成block类型。" class="headerlink" title="大部分元素在脱标后都会转换成block类型。"></a>大部分元素在脱标后都会转换成block类型。</h1><blockquote>
<p>这里可以抛出一个疑问，block类型不是占据父元素的宽度么，为什么脱标元素最终是由内容撑开的？<br>解答：元素脱标后，已经不受标准流约束，其位置也是不局限在父元素之内，很难说父元素是谁，且块级（block）元素默认宽高都为auto，难以参考父元素宽度，所以最好的展示形式就是默认由内容撑开。</p>
</blockquote>
<p>利用position可以对元素进行定位，常用取值有4个：</p>
<h1 id="static"><a href="#static" class="headerlink" title="static"></a>static</h1><ol>
<li>static为position属性的默认值，在不设置position属性时就是static。</li>
<li>元素按照标准流进行排布（忽略 top, bottom, left, right 或者 z-index 声明）。</li>
<li>元素和元素之间不会重叠，这个位置就是元素的默认位置。</li>
<li>相邻元素都设置外边距，最终外边距&#x3D;两者外边距中最大的。</li>
<li>左右外边距设置auto,这个块水平居中。</li>
</ol>
<h1 id="relative"><a href="#relative" class="headerlink" title="relative"></a>relative</h1><ol>
<li>元素按照标准流进行排布。而且占据的文档空间不会随 top &#x2F; right &#x2F; left &#x2F; bottom 等属性的偏移而发生变动。</li>
<li>相对定位相对的是它原本在文档流中的位置而进行的偏移。</li>
<li>可以通过left、right、top、bottom来进行位置调整。</li>
<li>相对定位应用场景：在不影响其它元素位置的前提下，可以对当前元素位置进行微调。</li>
</ol>
<h1 id="absolute"><a href="#absolute" class="headerlink" title="absolute"></a>absolute</h1><ol>
<li>元素脱离标准流（脱标）</li>
<li>定位参照对象是最近一级拥有定位的祖先元素（相对于static定位以外的第一个父元素进行定位），可以通过left、right、top、bottom来进行位置调整。</li>
<li>如果一直往上层元素找不到有定位的元素，那么最终的参照对象为浏览器窗口。</li>
<li>宽高由内容撑开。</li>
<li>包含块就是由它的最近的 position 的值不是 static 的祖先元素的<strong>内边距区</strong>的边缘组成。</li>
</ol>
<h1 id="fixed"><a href="#fixed" class="headerlink" title="fixed"></a>fixed</h1><ol>
<li>元素脱离标准流（脱标）</li>
<li>生成绝对定位的元素，相对于浏览器窗口进行定位。元素的位置通过 “left”, “top”, “right” 以及 “bottom” 属性进行规定。</li>
<li>当浏览器窗口滚动时，元素的位置是固定不动的。</li>
</ol>
<h1 id="inherit"><a href="#inherit" class="headerlink" title="inherit"></a>inherit</h1><p>规定应该从父元素继承 position 属性的值。</p>
<h1 id="子绝父相"><a href="#子绝父相" class="headerlink" title="子绝父相"></a>子绝父相</h1><blockquote>
<p>在绝大多数情况下，子元素的绝对定位都是相对于父元素进行定位的，虽然给父元素的position设置relative、absolute、fixed都可以，但是如果不希望父元素脱标，常用解决方案是：</p>
</blockquote>
<ul>
<li>父元素设置position: relative;（让父元素成为定位元素，又不脱离标准流）；</li>
<li>子元素设置position: absolute;；</li>
</ul>
<h1 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div class=&quot;div1&quot;&gt;第一个div&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;div2&quot;&gt;第二个div&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;div3&quot;&gt;第三个div&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;div4&quot;&gt;第四个div&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>
<p>添加背景色，效果如下：</p>
<p><img src="bacdef0f20b06043f339b3660aa907a682a2fcc96292c397627d962a15f10503.png" alt="图 3">  </p>
<h2 id="给第二个div设置absolute"><a href="#给第二个div设置absolute" class="headerlink" title="给第二个div设置absolute"></a>给第二个div设置absolute</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.div2</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: blueviolet;</span><br><span class="line">    <span class="attribute">position</span>:absolute;</span><br><span class="line">    <span class="attribute">top</span>:<span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">left</span>:<span class="number">50px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>效果如图：</p>
<p><img src="ff586163cd4e4a438e072c747d4e8d53dcf68629786ca6e81d02bb976393b675.png" alt="图 4">  </p>
<p>第二个div设置了absolute,则该div的宽度就由文本决定，且下面的div会上移占据之前第二个div的位置，top和left是相对于离它最近且不是static定位的父元素来定位的，在此div2因为没有父元素，所以第二个div相对于根元素即html元素来定位。</p>
<h2 id="将第二个div设置为relative"><a href="#将第二个div设置为relative" class="headerlink" title="将第二个div设置为relative"></a>将第二个div设置为relative</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.div2</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: blueviolet;   </span><br><span class="line">    <span class="attribute">position</span>:relative;</span><br><span class="line">    <span class="attribute">left</span>:<span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">top</span>:<span class="number">50px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>效果如图：</p>
<p><img src="bd8c6f0e017a8a9dc56c17aa070ac2faa0b3ffddf98d9255dfe1eb2ba32679ca.png" alt="图 5">  </p>
<p>设置relative的div不会影响其他div的位置，且top和left是相对于它原本自身的位置来定位。</p>
<h2 id="给第二个div添加一个父div"><a href="#给第二个div添加一个父div" class="headerlink" title="给第二个div添加一个父div"></a>给第二个div添加一个父div</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div class=&quot;div1&quot;&gt;第一个div&lt;/div&gt;    </span><br><span class="line">    &lt;div class=&quot;container1&quot;&gt;</span><br><span class="line">        第二个div的父div</span><br><span class="line">        &lt;div class=&quot;div2&quot;&gt;第二个div&lt;/div&gt;     </span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;div3&quot;&gt;第三个div&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;div4&quot;&gt;第四个div&lt;/div&gt;     </span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container1</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>:absolute;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: greenyellow;</span><br><span class="line">&#125;           </span><br><span class="line"></span><br><span class="line"><span class="selector-class">.div2</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: blueviolet;</span><br><span class="line">    <span class="attribute">position</span>:absolute;</span><br><span class="line">    <span class="attribute">top</span>:<span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">left</span>:<span class="number">50px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>效果如图：<br><img src="fec2d4e19a5cb64dde3b2ae27e406cd9364ed17ef683fe415ecb6de36d38a61c.png" alt="图 6">  </p>
<p>div2的父div设置为absolute，下面的div3,div4会上移，div2也设置为absolute，div2就会相对于父div来定位。</p>
<h2 id="若将div2即第二个div的absolute改为relative："><a href="#若将div2即第二个div的absolute改为relative：" class="headerlink" title="若将div2即第二个div的absolute改为relative："></a>若将div2即第二个div的absolute改为relative：</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.div2</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: blueviolet;</span><br><span class="line">    <span class="attribute">position</span>:relative;</span><br><span class="line">    <span class="attribute">top</span>:<span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">left</span>:<span class="number">50px</span>;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>则效果图如下：</p>
<p><img src="203e5233cb299bf8c8a89435f2755d0275a23ba913915937980a39f842f12a10.png" alt="图 7">  </p>
<p>上面两个图的第二个div与父div的上边距是不同的，第一个是相对父div来定位，第二个是相对原来本身的位置来定位。可能此时你会注意到两个图的第二个div的宽度不同，在没有给div设置宽度的情况下，第一个是设为absolute，所以宽度为文本宽度，第二个是relative，所以宽度与父元素宽度相同。</p>
<h1 id="若保持上面的两种情况，都将第二个div的宽度设为500px，得到效果如下："><a href="#若保持上面的两种情况，都将第二个div的宽度设为500px，得到效果如下：" class="headerlink" title="若保持上面的两种情况，都将第二个div的宽度设为500px，得到效果如下："></a>若保持上面的两种情况，都将第二个div的宽度设为500px，得到效果如下：</h1><p><img src="0aa95c8d7f9a779c1afc6abb284bcd7e84ebff8ebcfb4f2afae9c33d98670581.png" alt="图 8">  </p>
<p><img src="866dbc9eecca0154b3099ce040695d08b9cb28e12455d55d84617541f5054601.png" alt="图 9">  </p>
<p>由上图可以知道，absolute定位的子元素宽度不会影响父元素的宽，而relative定位的子元素会撑大父元素。</p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><ul>
<li><p>Absolution：元素会脱离文档流，定位是相对于离它最近的且不是static定位的父元素而言，若该元素没有设置宽度，则宽度由元素里面的内容决定，且宽度不会影响父元素，定位为absolution后，原来的位置相当于是空的，下面的的元素会来占据。</p>
</li>
<li><p>Relative：元素仍处于文档流中，定位是相对于原本自身的位置，若没有设置宽度，则宽度为父元素的宽度，该元素的大小会影响父元素的大小。</p>
</li>
<li><p>绝对(absolute)定位对象在可视区域之外会导致滚动条出现。而放置相对(relative)定位对象在可视区域之外，滚动条不会出现。</p>
</li>
<li><p>使用absoulte或fixed定位的话，必须指定 left、right、 top、 bottom 属性中的至少一个，否则left&#x2F;right&#x2F;top&#x2F;bottom属性会使用它们的默认值 auto ，这将导致对象遵从正常的HTML布局规则，在前一个对象之后立即被呈递，简单讲就是都变成relative，会占用文档空间，这点非常重要，很多人使用absolute定位后发现没有脱离文档流就是这个原因，这里要特别注意~~~</p>
</li>
<li><p>少了left&#x2F;right&#x2F;top&#x2F;bottom属性不行，那如果我们多设了呢？例如，我们同时设置了top和bottom的属性值，那元素又该往哪偏移好呢？记住下面的规则：</p>
<ul>
<li>如果top和bottom一同存在的话，那么只有top生效。</li>
<li>如果left和right一同存在的话，那么只有left生效。</li>
</ul>
</li>
<li><p>祖先类的margin会让子类的absoulte跟着偏移，而padding却不会让子类的absoulte发生偏移。总结一下，就是absoulte是根据祖先类的border进行的定位。</p>
</li>
<li><p>无论父级盒子是正常显示还是以border-box显示，在没有规定left和top的属性值时，都呈现在父级盒子的内容区（不包含padding）左上角若规定了left：0；top：0；则统一相对父级盒子的左上角显示（包含padding）</p>
</li>
<li><p>当只给元素定义了position：absolute时，如果top, bottom, left, right都没有指定时，则left，top值与原文档流位置一致（当然了它是不占位的）。所以只设置了top属性而未设置left属性就造成了它在水平方向上仍然保持原有位置，而这个位置绝对不是left：0。实际上不论是何种定位，规则都如上所述。</p>
</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetao50.github.io/2023/09/11/css/box-shadow%E5%B1%9E%E6%80%A7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="InfoPool">
      <meta itemprop="description" content="记录信息来源网络，内容只为方便查找，非公开信息，非请勿入">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | InfoPool">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/09/11/css/box-shadow%E5%B1%9E%E6%80%A7/" class="post-title-link" itemprop="url">box-shadow属性</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2023-09-11 18:30:49 / 修改时间：19:00:03" itemprop="dateCreated datePublished" datetime="2023-09-11T18:30:49+08:00">2023-09-11</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>box-shadow 属性用于在元素的框架上添加阴影效果。 你可以在同一个元素上设置多个阴影效果，并用 逗号 将他们分隔开。 该属性可设置的值包括阴影的X轴偏移量、Y轴偏移量、模糊半径、扩散半径和颜色。</p>
<p><code>box-shadow: [inset] &lt;offset-x&gt; &lt;offset-y&gt; [&lt;blur-radius&gt;] [&lt;spread-radius&gt;] color [,]</code></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/* x偏移量 | y偏移量 | 阴影颜色 */</span></span><br><span class="line"><span class="attribute">box-shadow</span>: <span class="number">60px</span> -<span class="number">16px</span> teal;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* x偏移量 | y偏移量 | 阴影模糊半径 | 阴影颜色 */</span></span><br><span class="line"><span class="attribute">box-shadow</span>: <span class="number">10px</span> <span class="number">5px</span> <span class="number">5px</span> black;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* x偏移量 | y偏移量 | 阴影模糊半径 | 阴影扩散半径 | 阴影颜色 */</span></span><br><span class="line"><span class="attribute">box-shadow</span>: <span class="number">2px</span> <span class="number">2px</span> <span class="number">2px</span> <span class="number">1px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 插页(阴影向内) | x偏移量 | y偏移量 | 阴影颜色 */</span></span><br><span class="line"><span class="attribute">box-shadow</span>: inset <span class="number">5em</span> <span class="number">1em</span> gold;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 任意数量的阴影，以逗号分隔 */</span></span><br><span class="line"><span class="attribute">box-shadow</span>: <span class="number">3px</span> <span class="number">3px</span> red, -<span class="number">1em</span> <span class="number">0</span> <span class="number">0.4em</span> olive;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 全局关键字 */</span></span><br><span class="line"><span class="attribute">box-shadow</span>: inherit;</span><br><span class="line"><span class="attribute">box-shadow</span>: initial;</span><br><span class="line"><span class="attribute">box-shadow</span>: inset;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>如果只给出两个值, 那么这两个值将会被当作 <offset-x> <offset-y> 来解释。<offset-x> 设置水平偏移量，正值阴影则位于元素右边，负值阴影则位于元素左边。<offset-y> 设置垂直偏移量，正值阴影则位于元素下方，负值阴影则位于元素上方</offset-y></offset-x></offset-y></offset-x></li>
<li>如果给出了第三个值, 那么第三个值将会被当作<blur-radius>解释。值越大，模糊面积越大，阴影越大越淡。不能为负值。</blur-radius></li>
<li>如果给出了第四个值, 那么第四个值将会被当作<spread-radius>解释。取正值时，阴影扩大；取负值时，阴影收缩。默认为0，此时阴影与元素同样大。</spread-radius></li>
<li>可选，inset关键字。默认阴影在边框外，即阴影向外扩散。使用 inset 关键字 会使得阴影落在盒子内部。 此时阴影会在边框之内 、背景之上、内容之下。可选，<color>值。</color></li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="selector-class">.shadow</span> &#123;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">40px</span>;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">      <span class="attribute">margin</span>: <span class="number">100px</span> auto;</span><br><span class="line">      <span class="attribute">border</span>: <span class="number">2px</span> solid orange;</span><br><span class="line">      <span class="attribute">box-shadow</span>: </span><br><span class="line">        -<span class="number">50px</span> <span class="number">0px</span> <span class="number">10px</span> <span class="number">0px</span> blue, </span><br><span class="line">        <span class="number">0px</span> -<span class="number">60px</span> <span class="number">0px</span> <span class="number">10px</span> red, </span><br><span class="line">        <span class="number">50px</span> <span class="number">0px</span> <span class="number">0px</span> <span class="number">0px</span> green, </span><br><span class="line">        <span class="number">0px</span> <span class="number">50px</span> <span class="number">0px</span> -<span class="number">10px</span> yellow;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;shadow&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p><img src="4b290ac489c9be5f6655e4db926d3d8482c88b716ea5ed852f88dbdc03dc0bd8.png" alt="图 0">  </p>
<p>观察图中四色方块可知：第三个数值（模糊半径）控制模糊程度，不改变阴影大小；第四个数值（扩散半径）会改变阴影大小，正值-&gt;阴影扩展，负值-&gt;阴影收缩。</p>
<h1 id="常见问题："><a href="#常见问题：" class="headerlink" title="常见问题："></a>常见问题：</h1><p>制作单边阴影时，明明设置了x,y轴方向的偏移，为什么别的边还是有阴影出现？</p>
<p>解决方案：增加此边所在方向的偏移量（数值大小与正负），并适当缩小阴影大小（第四个数值为负值），减少模糊半径的视觉影响；</p>
<h1 id="各种阴影的书写方式"><a href="#各种阴影的书写方式" class="headerlink" title="各种阴影的书写方式"></a>各种阴影的书写方式</h1><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="selector-class">.shadow</span> <span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">50px</span> <span class="number">120px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> solid yellowgreen;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">100px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="selector-class">.top</span> &#123;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0px</span> -<span class="number">5px</span> <span class="number">10px</span> -<span class="number">5px</span> red;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="selector-class">.right</span> &#123;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">5px</span> <span class="number">0</span> <span class="number">10px</span> -<span class="number">5px</span> red;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="selector-class">.bottom</span> &#123;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">5px</span> <span class="number">10px</span> -<span class="number">5px</span> red;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.left</span> &#123;</span><br><span class="line">    <span class="attribute">box-shadow</span>: -<span class="number">5px</span> <span class="number">0</span> <span class="number">10px</span> -<span class="number">5px</span> red;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.left-top</span> &#123;</span><br><span class="line">    <span class="attribute">box-shadow</span>: -<span class="number">5px</span> -<span class="number">5px</span> <span class="number">10px</span> -<span class="number">4px</span> red;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.right-top</span> &#123;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">5px</span> -<span class="number">5px</span> <span class="number">10px</span> -<span class="number">4px</span> red;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.right-bottom</span> &#123;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">5px</span> <span class="number">5px</span> <span class="number">10px</span> -<span class="number">4px</span> red;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="selector-class">.left-bottom</span> &#123;</span><br><span class="line">    <span class="attribute">box-shadow</span>: -<span class="number">5px</span> <span class="number">5px</span> <span class="number">10px</span> -<span class="number">4px</span> red;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.no-top</span> &#123;</span><br><span class="line">    <span class="comment">/* .left-bottom, .right-bottom 组合 */</span></span><br><span class="line">    <span class="attribute">box-shadow</span>: -<span class="number">5px</span> <span class="number">5px</span> <span class="number">10px</span> -<span class="number">4px</span> red, <span class="number">5px</span> <span class="number">5px</span> <span class="number">10px</span> -<span class="number">4px</span> red;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.no-right</span> &#123;</span><br><span class="line">    <span class="comment">/* .left-top, .left-bottom 组合 */</span></span><br><span class="line">    <span class="attribute">box-shadow</span>: -<span class="number">5px</span> -<span class="number">5px</span> <span class="number">10px</span> -<span class="number">4px</span> red, -<span class="number">5px</span> <span class="number">5px</span> <span class="number">10px</span> -<span class="number">4px</span> red;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.no-bottom</span> &#123;</span><br><span class="line">    <span class="comment">/* .left-top, .right-top 组合 */</span></span><br><span class="line">    <span class="attribute">box-shadow</span>: -<span class="number">5px</span> -<span class="number">5px</span> <span class="number">10px</span> -<span class="number">4px</span> red, <span class="number">5px</span> -<span class="number">5px</span> <span class="number">10px</span> -<span class="number">4px</span> red;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="selector-class">.no-left</span> &#123;</span><br><span class="line">    <span class="comment">/* .right-bottom, .right-top 组合 */</span></span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">5px</span> <span class="number">5px</span> <span class="number">10px</span> -<span class="number">4px</span> red, <span class="number">5px</span> -<span class="number">5px</span> <span class="number">10px</span> -<span class="number">4px</span> red;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;div class=&quot;shadow&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;top&quot;&gt;顶部阴影&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;right&quot;&gt;右部阴影&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;bottom&quot;&gt;底部阴影&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;left&quot;&gt;左边阴影&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;left-top&quot;&gt;左上阴影&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;right-top&quot;&gt;右上阴影&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;right-bottom&quot;&gt;右下阴影&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;left-bottom&quot;&gt;左下阴影&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;no-top&quot;&gt;无上阴影&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;no-right&quot;&gt;无右阴影&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;no-bottom&quot;&gt;无下阴影&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;no-left&quot;&gt;无左阴影&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="21578b081937d593fb9405d4ab27d270bcd3edc996257f6a60bfb744fd264cdf.png" alt="图 1">  </p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetao50.github.io/2023/09/11/css/filter%E5%B1%9E%E6%80%A7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="InfoPool">
      <meta itemprop="description" content="记录信息来源网络，内容只为方便查找，非公开信息，非请勿入">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | InfoPool">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/09/11/css/filter%E5%B1%9E%E6%80%A7/" class="post-title-link" itemprop="url">filter属性</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-09-11 16:05:18" itemprop="dateCreated datePublished" datetime="2023-09-11T16:05:18+08:00">2023-09-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-09-12 11:59:09" itemprop="dateModified" datetime="2023-09-12T11:59:09+08:00">2023-09-12</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>我们在处理图片时，经常使用的一个功能就是滤镜，它能使一张图像呈现各种不同的视觉效果。在 CSS 中，也有一个filter属性，让我们能用 CSS 代码为元素指定各种滤镜效果，比如模糊、灰度、明暗度、颜色偏移等。</p>
<p>filter的基础使用非常简单，CSS 标准里包含了一些已实现预定义效果的函数</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/* &lt;filter-function&gt; 值 */</span></span><br><span class="line"><span class="attribute">filter</span>: <span class="built_in">blur</span>(<span class="number">5px</span>);</span><br><span class="line"><span class="attribute">filter</span>: <span class="built_in">brightness</span>(<span class="number">0.4</span>);</span><br><span class="line"><span class="attribute">filter</span>: <span class="built_in">contrast</span>(<span class="number">200%</span>);</span><br><span class="line"><span class="attribute">filter</span>: <span class="built_in">drop-shadow</span>(<span class="number">16px</span> <span class="number">16px</span> <span class="number">20px</span> blue);</span><br><span class="line"><span class="attribute">filter</span>: <span class="built_in">grayscale</span>(<span class="number">50%</span>);</span><br><span class="line"><span class="attribute">filter</span>: <span class="built_in">hue-rotate</span>(<span class="number">90deg</span>);</span><br><span class="line"><span class="attribute">filter</span>: <span class="built_in">invert</span>(<span class="number">75%</span>);</span><br><span class="line"><span class="attribute">filter</span>: <span class="built_in">opacity</span>(<span class="number">25%</span>);</span><br><span class="line"><span class="attribute">filter</span>: <span class="built_in">saturate</span>(<span class="number">30%</span>);</span><br><span class="line"><span class="attribute">filter</span>: <span class="built_in">sepia</span>(<span class="number">60%</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* URL */</span></span><br><span class="line"><span class="attribute">filter</span>: <span class="built_in">url</span>(<span class="string">&quot;filters.svg#filter-id&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 多个滤镜 */</span></span><br><span class="line"><span class="attribute">filter</span>: <span class="built_in">contrast</span>(<span class="number">175%</span>) <span class="built_in">brightness</span>(<span class="number">3%</span>);</span><br><span class="line"><span class="attribute">filter</span>: <span class="built_in">drop-shadow</span>(<span class="number">3px</span> <span class="number">3px</span> red) <span class="built_in">sepia</span>(<span class="number">100%</span>) <span class="built_in">drop-shadow</span>(-<span class="number">3px</span> -<span class="number">3px</span> blue);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 不使用滤镜 */</span></span><br><span class="line"><span class="attribute">filter</span>: none;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 全局值 */</span></span><br><span class="line"><span class="attribute">filter</span>: inherit;</span><br><span class="line"><span class="attribute">filter</span>: initial;</span><br><span class="line"><span class="attribute">filter</span>: revert;</span><br><span class="line"><span class="attribute">filter</span>: revert-layer;</span><br><span class="line"><span class="attribute">filter</span>: unset;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><ul>
<li>blur():将高斯模糊应用于输入图像。</li>
<li>brightness(): 将线性乘法器应用于输入图像，以调整其亮度。值为 0% 将创建全黑图像；值为 100% 会使输入保持不变，其他值是该效果的线性乘数。如果值大于 100% 将使图像更加明亮。</li>
<li>contrast()：调整输入图像的对比度。值是 0% 将使图像变灰；值是 100%，则无影响；若值超过 100% 将增强对比度。</li>
<li>drop-shadow()：使用 <shadow> 参数沿图像的轮廓生成阴影效果，阴影语法类似于 <box-shadow>（在 CSS 背景和边框模块中定义），但不允许使用 inset 关键字以及 spread 参数。与所有 filter 属性值一样，任何在 drop-shadow() 后的滤镜同样会应用在阴影上。</box-shadow></shadow></li>
<li>grayscale()：将图像转换为灰度图。值为 100% 则完全转为灰度图像，若为初始值 0% 则图像无变化。值在 0% 到 100% 之间，则是该效果的线性乘数。</li>
<li>hue-rotate()：应用色相旋转。<angle> 值设定图像会被调整的色环角度值。值为 0deg，则图像无变化。</angle></li>
<li>invert()：反转输入图像。值为 100% 则图像完全反转，值为 0% 则图像无变化。值在 0% 和 100% 之间，则是该效果的线性乘数。</li>
<li>opacity():应用透明度。值为 0% 则使图像完全透明，值为 100% 则图像无变化。</li>
<li>saturate():改变图像饱和度。值为 0% 则是完全不饱和，值为 100% 则图像无变化。超过 100% 则增加饱和度。</li>
<li>sepia():将图像转换为深褐色。值为 100% 则完全是深褐色的，值为 0% 图像无变化.</li>
</ul>
<h1 id="组合函数"><a href="#组合函数" class="headerlink" title="组合函数"></a>组合函数</h1><p>你可以组合任意数量的函数来控制渲染。滤镜将按声明顺序依次应用。以下示例增强了图像的对比度和亮度。</p>
<p><code>filter: contrast(175%) brightness(103%);</code></p>
<p>滤镜在日常开发中是很常见的，比如使用drop-shadow给不规则形状添加阴影；使用blur来实现背景模糊，以及毛玻璃效果等。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot; /&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">      .box &#123;</span><br><span class="line">        background-color: #fff;</span><br><span class="line">        position: relative;</span><br><span class="line">        width: 125px;</span><br><span class="line">        height: 204px;</span><br><span class="line">        margin: 50px;</span><br><span class="line">        filter: drop-shadow(0px 2px 8px rgba(198, 198, 198, 0.5));</span><br><span class="line">        /* box-shadow: 0px 2px 8px 0px rgba(198, 198, 198, 0.5); */</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      .box::after &#123;</span><br><span class="line">        content: &quot;&quot;;</span><br><span class="line">        position: absolute;</span><br><span class="line">        top: -40px;</span><br><span class="line">        left: calc(50% - 20px);</span><br><span class="line">        width: 0;</span><br><span class="line">        height: 0;</span><br><span class="line">        border: 20px solid transparent;</span><br><span class="line">        border-bottom-color: #fff;</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;div class=&quot;box&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="1ae2217fcd1175f1942cb420fd0c53241ac32697b965b5d432844c6138f092a1.png" alt="图 0">  </p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetao50.github.io/2023/09/04/css/MouseEvent%E4%BA%8B%E4%BB%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="InfoPool">
      <meta itemprop="description" content="记录信息来源网络，内容只为方便查找，非公开信息，非请勿入">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | InfoPool">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/09/04/css/MouseEvent%E4%BA%8B%E4%BB%B6/" class="post-title-link" itemprop="url">MouseEvent事件</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2023-09-04 16:31:43 / 修改时间：17:15:30" itemprop="dateCreated datePublished" datetime="2023-09-04T16:31:43+08:00">2023-09-04</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>MouseEvent 接口指用户与指针设备（如鼠标）交互时发生的事件。使用此接口的常见事件包括：click、dblclick、mouseup、mousedown。</p>
<p>打印出来的 MouseEvent  如下：</p>
<p><img src="7755c89eb753af75544ad119bd7378d3c70c50e3021cf5e47cca86fbb1d8ac09.png" alt="图 0">  </p>
<p>经典的图:<br><img src="7a837e92eaefb8d797d585e08a05beffdbfea43f86717d43cf5f954ced967439.png" alt="图 1">  </p>
<h1 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h1><ul>
<li><p>MouseEvent.pageX：实验性，鼠标指针相对于整个文档的 X 坐标；</p>
</li>
<li><p>MouseEvent.pageY：实验性，鼠标指针相对于整个文档的 Y 坐标；</p>
<blockquote>
<p>MouseEvent.page* 鼠标事件发生时，鼠标指针相对于整个文档左上角的水平距离和垂直距离。它受页面滚动的影响，页面滚动，它的值也会随之改变。</p>
</blockquote>
</li>
<li><p>MouseEvent.clientX:鼠标指针在点击元素（DOM）中的 X 坐标。</p>
</li>
<li><p>MouseEvent.clientY:鼠标指针在点击元素（DOM）中的 Y 坐标。</p>
</li>
</ul>
<blockquote>
<p>MouseEvent.client*: 鼠标指针相对于浏览器窗口左上角的水平距离和垂直距离。它不受页面滚动的影响，即使页面滚动，它的值也不会改变</p>
</blockquote>
<ul>
<li><p>MouseEvent.x 实验性，MouseEvent.clientX的别名。</p>
</li>
<li><p>MouseEvent.y 实验性，MouseEvent.clientY的别名。</p>
</li>
<li><p>MouseEvent.screenX：鼠标指针相对于全局（屏幕）的 X 坐标；</p>
</li>
<li><p>MouseEvent.screenY：鼠标指针相对于全局（屏幕）的 Y 坐标；</p>
</li>
<li><p>MouseEvent.offsetX：实验性，鼠标指针相对于目标节点内边位置的 X 坐标</p>
</li>
<li><p>MouseEvent.offsetY：实验性，鼠标指针相对于目标节点内边位置的 Y 坐标</p>
</li>
<li><p>MouseEvent.movementX:鼠标指针相对于最后mousemove事件位置的 X 坐标。</p>
</li>
<li><p>MouseEvent.movementY：鼠标指针相对于最后mousemove事件位置的 Y 坐标。</p>
</li>
<li><p>MouseEvent.altKey:当鼠标事件触发的时，如果 alt 键被按下，返回 true;</p>
</li>
<li><p>MouseEvent.button:当鼠标事件触发的时，如果鼠标按钮被按下（如果有的话），将会返回一个数值。0 表示左键，1 表示中键，2 表示右键</p>
</li>
<li><p>MouseEvent.buttons:当鼠标事件触发的时，如果多个鼠标按钮被按下（如果有的话），将会返回一个或者多个代表鼠标按钮的数字。</p>
</li>
<li><p>MouseEvent.ctrlKey:当鼠标事件触发时，如果 control 键被按下，则返回 true；</p>
</li>
<li><p>MouseEvent.metaKey:当鼠标事件触发时，如果 meta 键被按下，则返回 true；</p>
</li>
<li><p>MouseEvent.region：返回被点击事件影响的点击区域的 id，如果没有区域被影响则返回 null。</p>
</li>
<li><p>MouseEvent.relatedTarget：鼠标事件的次要目标（如果有的话）</p>
</li>
<li><p>MouseEvent.shiftKey：当鼠标事件触发时，如果 shift 键被按下，则返回 true；</p>
</li>
<li><p>MouseEvent.which 非标准，当鼠标事件触发时，表示被按下的按钮。</p>
</li>
<li><p>MouseEvent.mozInputSource 非标准，生成事件的类型（若干 MOZ_SOURCE_*常量如下列出）。可通过该属性获知鼠标事件是否由真实鼠标设备触发，亦或通过触摸事件触发（这可能影响处理坐标事件时的精确程度）。</p>
</li>
<li><p>MouseEvent.webkitForce 非标准，点击时施加的压力量。</p>
</li>
</ul>
<h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><ol>
<li>当页面没有滚动时，MouseEvent.clientX 和 MouseEvent.pageX 的值相等。但当页面滚动时，MouseEvent.clientX 的值不变，而 MouseEvent.pageX 的值会随着页面滚动而增加或减少。</li>
<li>如果需要获得相对于事件目标元素的坐标，应该使用 MouseEvent.offsetX。如果需要获得相对于当前窗口的坐标，应该使用 MouseEvent.clientX。</li>
<li>preventDefault()：阻止事件的默认行为。例如，在链接上单击鼠标时，会跳转到链接指向的地址。如果在单击事件处理程序中调用了 preventDefault() 方法，则不会跳转到链接地址。</li>
<li>stopPropagation()：阻止事件进一步传播到其他元素。例如，在一个元素上发生的单击事件可能会传播到该元素的父元素或其他子元素。如果在单击事件处理程序中调用了 stopPropagation() 方法，则事件将不会进一步传播。</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetao50.github.io/2023/09/01/css/pointer-events%E4%BB%8B%E7%BB%8D/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="InfoPool">
      <meta itemprop="description" content="记录信息来源网络，内容只为方便查找，非公开信息，非请勿入">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | InfoPool">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/09/01/css/pointer-events%E4%BB%8B%E7%BB%8D/" class="post-title-link" itemprop="url">pointer-events介绍</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2023-09-01 17:30:06 / 修改时间：18:09:58" itemprop="dateCreated datePublished" datetime="2023-09-01T17:30:06+08:00">2023-09-01</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>pointer-events 属性是一个指针属性，是用于控制在什么条件下特定的图形元素可以成为指针事件的目标,当这个属性设置为none时，可以禁用 HTML 元素的 hover&#x2F;focus&#x2F;active 等动态效果,元素则不接收hover、click事件，由他后面的元素进行接收。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/* Keyword values */</span></span><br><span class="line"><span class="attribute">pointer-events</span>: auto;</span><br><span class="line"><span class="attribute">pointer-events</span>: none;</span><br><span class="line"><span class="attribute">pointer-events</span>: visiblePainted; <span class="comment">/* SVG only */</span></span><br><span class="line"><span class="attribute">pointer-events</span>: visibleFill;    <span class="comment">/* SVG only */</span></span><br><span class="line"><span class="attribute">pointer-events</span>: visibleStroke;  <span class="comment">/* SVG only */</span></span><br><span class="line"><span class="attribute">pointer-events</span>: visible;        <span class="comment">/* SVG only */</span></span><br><span class="line"><span class="attribute">pointer-events</span>: painted;        <span class="comment">/* SVG only */</span></span><br><span class="line"><span class="attribute">pointer-events</span>: fill;           <span class="comment">/* SVG only */</span></span><br><span class="line"><span class="attribute">pointer-events</span>: stroke;         <span class="comment">/* SVG only */</span></span><br><span class="line"><span class="attribute">pointer-events</span>: all;            <span class="comment">/* SVG only */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Global values */</span></span><br><span class="line"><span class="attribute">pointer-events</span>: inherit;  从其父元素继承此属性</span><br><span class="line"><span class="attribute">pointer-events</span>: initial;  将此属性设置为其默认值</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="针对HTML元素"><a href="#针对HTML元素" class="headerlink" title="针对HTML元素"></a>针对HTML元素</h1><ul>
<li>none：该元素永远不会成为鼠标事件的 target。但是，当其后代元素的 pointer-events 属性指定其他值时，鼠标事件可以指向后代元素，在这种情况下，鼠标事件将在捕获或冒泡阶段触发父元素的事件侦听器 (鼠标的动作将不能被该元素及其子元素所捕获，但是能够被其父元素所捕获)。</li>
<li>auto：默认值，表示指针事件已启用；此时元素会响应指针事件，阻止这些事件在其下面的元素上触发。</li>
<li>inherit：将使用 pointer-events 元素的父级的值。</li>
</ul>
<p>除去SVG的独有属性，其他是对浏览器来说生效的属性值。</p>
<h1 id="未设置属性pointer-events"><a href="#未设置属性pointer-events" class="headerlink" title="未设置属性pointer-events"></a>未设置属性pointer-events</h1><p>未设置属性的情况下，在光标移动到box1可以正常的触发hover，并且移动到box1和box2重叠的部分也是触发box1的hover</p>
<p><img src="d98836850a8653b984b300e6e5293051c1359cb67ed1f38b5efd29a38cdca6a1.gif" alt="图 0">  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">    .box1 &#123;</span><br><span class="line">      width: 100px;</span><br><span class="line">      height: 100px;</span><br><span class="line">      background: #04BBD4;</span><br><span class="line">      margin: 20px;</span><br><span class="line">      z-index: 3;</span><br><span class="line">    &#125;</span><br><span class="line">    .box2 &#123;</span><br><span class="line">      width: 100px;</span><br><span class="line">      height: 100px;</span><br><span class="line">      background: #090A0E;</span><br><span class="line">      margin: -80px 40px 20px;</span><br><span class="line">      z-index: 2;</span><br><span class="line">      /* pointer-events: none; */</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    .box1:hover &#123;</span><br><span class="line">      background:#078404;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    .box2:hover &#123;</span><br><span class="line">      background:#E98889;</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/style&gt;</span><br><span class="line">&lt;div class=&quot;box1&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;div class=&quot;box2&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<h1 id="设置box1属性pointer-events为none"><a href="#设置box1属性pointer-events为none" class="headerlink" title="设置box1属性pointer-events为none"></a>设置box1属性pointer-events为none</h1><p>设置属性的情况下，在光标移动到box1无法正常的触发hover，此时hover已经失效，移动到box1和box2重叠的部分则是触发box2的hover</p>
<p><img src="96c76495ee7c4a08932ebd3b3ba22f5f.gif" alt="图 1">  </p>
<h1 id="事件传播"><a href="#事件传播" class="headerlink" title="事件传播"></a>事件传播</h1><p>父元素如果设置了pointer-event:none 并不意味着父元素上的事件侦听器永远不会被触发，当子元素上设置pointer-event值不是none,那么都可以通过事件传播机制来触发父元素上的事件。</p>
<p>该属性也可用来提高滚动时的帧频。的确，当滚动时，鼠标悬停在某些元素上，则触发其上的 hover 效果，然而这些影响通常不被用户注意，并多半导致滚动出现问题。对body元素应用pointer-events：none，禁用了包括hover在内的鼠标事件，从而提高滚动性能。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetao50.github.io/2023/08/24/angular/Angular%E8%B7%AF%E7%94%B1%E5%AE%88%E5%8D%AB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="InfoPool">
      <meta itemprop="description" content="记录信息来源网络，内容只为方便查找，非公开信息，非请勿入">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | InfoPool">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/08/24/angular/Angular%E8%B7%AF%E7%94%B1%E5%AE%88%E5%8D%AB/" class="post-title-link" itemprop="url">Angular路由守卫</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2023-08-24 10:23:51 / 修改时间：14:06:25" itemprop="dateCreated datePublished" datetime="2023-08-24T10:23:51+08:00">2023-08-24</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>我们使用Angular Guards来控制用户是否可以导航到或离开当前路由。</p>
<p>我们使用路由守卫的常见场景之一是身份验证。我们希望我们的应用程序能够阻止未经授权的用户访问受保护的路由。当用户试图导航到受保护的路由时，angular调用CanActivate。然后，我们挂接到CanActivate防护程序，并使用身份验证服务来检查用户是否有权使用路由，如果没有，我们可以将用户重定向到登录页面。</p>
<h1 id="守卫路由的作用"><a href="#守卫路由的作用" class="headerlink" title="守卫路由的作用"></a>守卫路由的作用</h1><ul>
<li>确认导航操作</li>
<li>询问是否在离开视图之前进行数据保存</li>
<li>允许特定用户访问应用程序的某些部分</li>
<li>在导航到新路由之前验证路由参数</li>
<li>在显示组件之前获取一些数据</li>
</ul>
<h1 id="路由守卫类型"><a href="#路由守卫类型" class="headerlink" title="路由守卫类型"></a>路由守卫类型</h1><p>Angular Router支持五种不同的路由守卫，您可以使用它们来保护路由</p>
<ul>
<li>CanActivate：决定是否可以激活路由（或使用组件）。在用户未被授权导航到目标组件的情况下，此保护非常有用。或者用户可能没有登录到系统</li>
<li>CanDeactivate：决定用户是否可以离开组件（导航离开当前组件）。在用户可能有一些未保存的挂起更改的情况下，此路由非常有用。</li>
<li>Resolve：延迟路由的激活，直到某些任务完成。在激活路由之前，您可以使用Resolve守卫从后端API获取数据</li>
<li>CanLoad：防止加载延迟加载模块。我们通常在不希望未经授权的用户看到模块的源代码时使用此保护。CanLoad与CanActivate类似，但有一点不同。CanActivate防止访问特定的路由。CanLoad防止整个延迟加载模块被下载，从而保护该模块中的所有路由。</li>
<li>CanActivateChild：确定是否可以激活子路由。CanActivateChild与CanActivate非常相似。我们将CanActivateChild应用于父路由。每当用户试图导航到其任何子路由时，Angular都会调用CanActivateChild。这使我们能够检查某些情况，并决定是继续导航还是取消导航。</li>
</ul>
<h1 id="如何创建Angular路由守卫"><a href="#如何创建Angular路由守卫" class="headerlink" title="如何创建Angular路由守卫"></a>如何创建Angular路由守卫</h1><ul>
<li><p>建立Guard服务。</p>
<blockquote>
<p>@Injectable()<br>export class ProductGuardService implements CanActivate {}</p>
</blockquote>
</li>
<li><p>在服务中实现Guard方法</p>
<blockquote>
<p>canActivate(): boolean {<br>  &#x2F;&#x2F; Check weather the route can be activated;<br>  return true;<br>  &#x2F;&#x2F; or false if you want to cancel the navigation;<br>  }</p>
</blockquote>
</li>
<li><p>在根模块中注册Guard服务</p>
<blockquote>
<p>providers: [ProductService,ProductGuardService]</p>
</blockquote>
</li>
<li><p>更新路由以使用Guard服务</p>
<blockquote>
<p>{ path: ‘product’, component: ProductComponent, canActivate : [ProductGuardService] }</p>
</blockquote>
</li>
</ul>
<h1 id="守卫路由调用顺序"><a href="#守卫路由调用顺序" class="headerlink" title="守卫路由调用顺序"></a>守卫路由调用顺序</h1><p>添加路由守卫语法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="attr">path</span>: <span class="string">&#x27;product&#x27;</span>, component,        </span><br><span class="line">    canActivate : any[],        </span><br><span class="line">    <span class="attr">canActivateChild</span>: any[],       </span><br><span class="line">    <span class="attr">canDeactivate</span>: any[],       </span><br><span class="line">    <span class="attr">canLoad</span>: any[],       </span><br><span class="line">    <span class="attr">resolve</span>: any[] </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>一条路由可以有多个守卫保护，并且可以在路由层次结构的每个级别都有守卫保护。</p>
<ul>
<li>始终首先检查CanDeactivate（）和CanActivateChild（）防护。检查从最深的子路径开始到顶部。</li>
<li>接下来将检查CanActivate（）保护，并从顶部开始检查最深的子路由。</li>
<li>接下来调用CanLoad（），如果要异步加载功能模块。</li>
<li>Resolve（）Guard是最后调用的。</li>
</ul>
<p>如果任何防护返回false，则Angular路由器将取消导航。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder"></span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  





  





</body>
</html>
